<view class="container">
  <view class="header">
    <text class="iconfont icon-kechenganpai"></text>
    <text class="title">课程安排</text>
  </view>

  <view class="progress-container">
    <view class="progress">
      <text class="label">学习进度：</text>
      <text class="progress-value">{{stage_completed_count}}/{{stage_courses_count}}</text>
    </view>
    <view class="progress-bar-container">
      <progress percent="{{stage_completion_percentage}}" stroke-width="12" color="#3cc51f" active />
      <text class="progress-percent">{{stage_completion_percentage}}%</text>
    </view>
  </view>

  <view class="table">
    <!-- 表头(即第一行) -->
    <view class="tr header-row">
        <view class="th">序号</view>
        <view class="th">日期</view>
        <view class="th">课程模块/系列</view>
        <view class="th">内容名称</view>
        <view class="th">学习点拨</view>
        <view class="th">时长(分钟)</view>
        <view class="th">状态</view>
        <view class="th">操作</view>
    </view>
    <!-- 使用 wx:for 循环展示数据 -->
    <block wx:for="{{courses}}" wx:key="index">
      <view class="tr">
        <view class="td">{{item.index}}</view>
        <view class="td">{{item.date}}</view>
        <view class="td">{{item.module}}</view>
        <view class="td">{{item.title}}</view>
        <view class="td">{{item.tips}}</view>
        <view class="td">{{item.duration}}</view>
        <view class="td">
          <text wx:if="{{item.is_completed}}" class="course-status status-completed">已学习</text>
          <text wx:if="{{!item.is_completed}}" class="course-status status-pending">待学习</text>
        </view>
        <view class="td action-links">
          <button wx:if="{{item.is_completed}}" class="action-button text-warning" bindtap="handleAction" data-index="{{item.index}}" data-action="取消标记">
            <text>取消标记</text>
          </button>
          <button wx:if="{{!item.is_completed}}" class="action-button text-success" bindtap="handleAction" data-index="{{item.index}}" data-action="标记完成">
            <text>标记完成</text>
          </button>
        </view>
      </view>
    </block>
  </view>
</view>